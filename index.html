<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
    <title>Formulario Agregar Usuario | Esteban Arroyo</title>
</head>

<body>
    <div class="container bg-warning">
        <div class="row align-content-center justify-content-center">
            <div class="col-6 py-5">
                <h3 class="text-center display-6 fw-bold py-2">Formulario Agregar Usuario</h3>
                <form id="myFormulario">
                    <div class="mb-3">
                        <label for="nombre" class="form-label">Nombre</label>
                        <input type="text" class="form-control" name="nombre" id="nombre" placeholder="Ingrese su nombre">
                    </div>

                    <div class="mb-3">
                        <label for="apellido" class="form-label">Apellido</label>
                        <input type="text" class="form-control" name="apellido" id="apellido" placeholder="Ingrese su Apellido">
                    </div>

                    <div class="mb-3">
                        <label for="email" class="form-label">Email address</label>
                        <input type="email" class="form-control" name="email" id="email" aria-describedby="emailHelp" placeholder="Ingrese su email">
                    </div>

                    <div class="mb-3">
                        <label for="telefono" class="form-label">Teléfono</label>
                        <input type="text" class="form-control" name="telefono" id="telefono" placeholder="Ingrese su Teléfono">
                    </div>

                    <button type="submit" class="btn btn-primary">Submit</button>
                </form>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="row align-content-center justify-content-center">
            <div class="col-10">
                <!--<div id="output"></div>-->
                <table class="table table-striped table-hover">
                    <thead>
                        <tr>
                            <th scope="col">Nombre</th>
                            <th scope="col">Apellido</th>
                            <th scope="col">email</th>
                            <th scope="col">Teléfono</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr id="output">

                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function(e) {

            var miForm = document.getElementById('myFormulario');
            miForm.onsubmit = function(e) {
                e.preventDefault();
                var formData = new FormData(this);
                var jsonData = {}; //Se crea un objeto donde se guarda la información del formulario
                for (var [k, v] of formData) { //se crean dos variables; K y V
                    jsonData[k] = v; //Agrego la informacion del formulario al objeto  
                }
                console.log(jsonData); //Veo el objeto en consola
                var myJSON = JSON.stringify(jsonData); //convierto el objeto a json
                console.log(myJSON); //veo el json en consola

                localStorage.setItem('testJSON', myJSON); // Storing data
                text = localStorage.getItem('testJSON'); // Retrieving data
                console.log(text);

                nuevoObjeto = JSON.parse(text); //Convierte un data json a un objeto
                console.log(nuevoObjeto);
                for (x in nuevoObjeto) {
                    document.getElementById("output").innerHTML += `<tr><td>${nuevoObjeto[x]}</td></tr>`;
                };

            };

        });
    </script>
</body>

</html>